



<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <title>NEC Case DB</title>
    <link href="http://172.16.1.239:50080/NECDB/css/bootstrap.min.css" rel="stylesheet">
    <link href="http://172.16.1.239:50080/NECDB/css/indexCss.css" rel="stylesheet">


</head>
<body>
<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<script src="http://172.16.1.239:50080/NECDB/js/jquery.min.js"></script>
<script src="http://172.16.1.239:50080/NECDB/js/jquery-1.9.1.js"></script>
<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="http://172.16.1.239:50080/NECDB/js/bootstrap.min.js"></script>
<script src="http://172.16.1.239:50080/NECDB/js/bootbox.min.js"></script>
<script type="text/javascript">
    $(function () {

        if($("#hostName")[0]) {
            if(window.location.hostname == '10.184.40.245') {
                $("#hostName")[0].innerHTML = "UAT";
            } else if(window.location.hostname == 'localhost') {
                $("#hostName")[0].innerHTML = "DEV";
            }
        }

        $("#logOutBtn").click(function () {
            console.info("click log out btn ");
            $.ajax({

                type: "post",
                url: 'http://172.16.1.239:50080/NECDB//User/logOut',
                data: {//设置数据源

                },
                dataType: "json",//设置需要返回的数据类型
                success: function (dataMap) {
                    console.info("log out");
                    console.info(dataMap.responseText);
                    bootbox.alert("Log Out");
                    window.location.href = "index.jsp";
                }

            });
        });
        $("#TestPlanMain").click(function () {
        	$("#Home").removeClass("active");
            $("#TestPlanMain").addClass("active");
        });
    });
</script>
<style type="text/css">
    .dropdown-submenu {
            position: relative;
    }
    .dropdown-submenu > .dropdown-menu {
        top: 0;
        left: 100%;
        margin-top: -6px;
        margin-left: -1px;
        -webkit-border-radius: 0 6px 6px 6px;
        -moz-border-radius: 0 6px 6px;
        border-radius: 0 6px 6px 6px;
    }
    .dropdown-submenu:hover > .dropdown-menu {
        display: block;
    }
    .dropdown-submenu > a:after {
        display: block;
        content: " ";
        float: right;
        width: 0;
        height: 0;
        border-color: transparent;
        border-style: solid;
        border-width: 5px 0 5px 5px;
        border-left-color: #ccc;
        margin-top: 5px;
        margin-right: -10px;
    }
    .dropdown-submenu:hover > a:after {
        border-left-color: #fff;
    }
    .dropdown-submenu.pull-left {
        float: none;
    }
    .dropdown-submenu.pull-left > .dropdown-menu {
        left: -100%;
        margin-left: 10px;
        -webkit-border-radius: 6px 0 6px 6px;
        -moz-border-radius: 6px 0 6px 6px;
        border-radius: 6px 0 6px 6px;
    }
</style>
<nav class="navbar  navbar-custom navbar-fixed-top " style="height:40px">
    <div id="title" class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->

        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
                    data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-left">
                
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li class="active" id="Home"><a href="http://172.16.1.239:50080/NECDB/index.jsp">Home <span class="sr-only">(current)</span></a></li>
                <li class="dropdown" id="MaterialMain">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                        MaterialMgmt<b class="caret"></b>
                    </a>
                    <ul class="dropdown-menu">
                        <li><a href="http://172.16.1.239:50080/NECDB/phase4/goToMaterialHome">整机管理</a></li>
                        <li><a href="http://172.16.1.239:50080/NECDB/phase4/toMatlTspHome">散件管理</a></li>
                        
                    </ul>
                </li>
                
	                
                
                
                    <li>
                        <button id="login" class="btn btn-info navbar-btn" data-toggle="modal" data-target="#loginModal">
                            Log In
                        </button>
                    </li>
                
            </ul>

        </div>
        <!-- /.navbar-collapse -->

    </div>
    <!-- /.container-fluid -->

</nav>

<div class="container-fluid">
    <div class="row">
        <div class="col-lg-9"><img src="http://172.16.1.239:50080/NECDB/image/6.png"></div>
        <div class="col-lg-3"><img src="http://172.16.1.239:50080/NECDB/image/8.png">
        </div>
    </div>
    <br>
    <br>
</div>

<div id="carousel-example-generic" class="carousel slide" data-ride="carousel">
    <!-- Indicators -->
    <ol class="carousel-indicators">
        
        <li data-target="#carousel-example-generic" data-slide-to="0" class="active"></li>
        <li data-target="#carousel-example-generic" data-slide-to="1"></li>
    </ol>

    <!-- Wrapper for slides -->
    <div class="carousel-inner" role="listbox">
        
            
            
                
            
        
        <div class="item active">
            <img src="image/2.png" onclick="javascript:window.location.href='phase4/ProjectHome';">

            <div class="option">

            </div>

        </div>
        <div class="item">
            <img src="image/3.png" onclick="javascript:window.location.href='phase4/TestCaseHome';">


            <div class="option">
                
            </div>

        </div>
    </div>

    <!-- Controls -->
    <a class="left carousel-control" href="#carousel-example-generic" role="button" data-slide="prev">
        <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
        <span class="sr-only">上一页</span>
    </a>
    <a class="right carousel-control" href="#carousel-example-generic" role="button" data-slide="next">
        <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
        <span class="sr-only">下一页</span>
    </a>
</div>




<script type="text/javascript">
  $(function() {
    $("#loginBtn").click(function() {
      var userName = $("#userName").val().trim();
      var password1 =$("#pw").val().trim();

      if(password1=="")  {
        bootbox.alert("Password should not be null!");
        return false;
      }
      if (userName == '') {
        bootbox.alert("Empty User Name!!");
        return false;
      }
      console.info(userName+" pw  "+password1);
      $.ajax({
        type : "post",
        url : 'http://172.16.1.239:50080/NECDB//User/LoginUser',
        data : {//设置数据源
          userName : userName,
          password : password1
        },
        dataType : "json",//设置需要返回的数据类型
        success : function(d) {
          console.info(d.isSuccess);
          if(d.isSuccess==1){
            bootbox.alert("Successfully!");

            window.localStorage.setItem("loginUser", JSON.stringify(d.loginUser));

            setTimeout('window.location.href="index.jsp"' ,500);

          }
          if(d.isSuccess==0){
            bootbox.alert("User is not registered!");
            $("#Register").click();
          }
          if(d.isSuccess==2){
            bootbox.alert("Error Password!");
            setTimeout('window.location.href="index.jsp"' ,500);
            //('#loginModal').modal({backdrop:true})
            //$('#loginModal').modal('show')
          }
        },
        error : function(d) {
          console.info(d.responseText);
        },
//                error : function() {
//                    alert("用户名未被注册!");
//                    $("#Register").click();
//                }
      });
    });
  });
</script>

<!-- Login Frame -->
<div id="loginModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <a class="close" data-dismiss="modal">×</a>
        <h1 class="text-center text-primary">Sign In</h1>
      </div>
      <div class="modal-body">
        <form class="form col-md-12 center-block">
          <div class="form-group">
            <input type="text" id="userName" class="form-control input-lg" placeholder="User Name">
          </div>
          <div class="form-group">
            <input type="password" id="pw" class="form-control input-lg" placeholder="Password">
          </div>

          <div class="form-group">
            <button id="loginBtn" class="btn btn-primary btn-lg btn-block" data-dismiss="modal">Log in</button>
            <!-- <span><a href="#">找回密码</a></span> -->
            
            <br>
            <span><a onclick="$('#loginModal').modal('hide')" data-toggle="modal" data-target="#Register" class="pull-right">Register</a></span>
          </div>
        </form>
      </div>
      <div class="modal-footer">
      </div>
    </div>
  </div>
</div>


<!-- debug-->

  
    
  







<script type="text/javascript">

  $(function() {
    $("#regBtn").click(function() {
      var userName = $("#reguserName").val().trim();
      var password1 =$("#regpw").val().trim();
      var password2 =$("#regpws").val().trim();
      console.info(password1);
      console.info(password2);
      if(password1!=password2)  {
          alert("两次密码不一致！");
          return false;
      }
      if (userName == '') {
        alert("User Name 不能为空");
        return false;
      }
      
      var displayName = $("#displayName")[0].value;
      if(!displayName) {
        alert("Display Name 不能为空");
        return false;
      }
      
      var itCode = $("#itCode")[0].value;
      if(!itCode) {
        alert("ItCode 不能为空");
        return false;
      }
      console.info(userName+" pw  "+password1);

      //login1为Action类命名空间名称；AjaxExecute为Action方法名称
      $.ajax({
        type : "post",
        url : 'User/userRegAction',
        async: false,
        data : {//设置数据源
          userName : userName,
          password : password1,
          displayName: displayName,
          itCode: itCode
        },
        dataType : "json",//设置需要返回的数据类型
        success : function(d) {
          if(d.status) {
            if(d.status == "-1") {
              if(d.msg) {
                alert("注册失败！" + d.msg);
              }else {
                alert("注册失败，请联系管理员");
              }
              return false;
            }else if(d.status == "1") {
              alert("注册成功");
              $("#loginModal").click();
            }
          }
          // alert("Register done");
        },
        error : function(d) {
          alert(d.responseText)
          alert("UserName has been used!");
            $("#Register").click();
        }
      });
    });
  });
  </script>
<div id="Register" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="Label" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <a class="close" data-dismiss="modal">×</a>
        <h1 class="text-center text-primary">注册</h1>
      </div>
      <div class="modal-body">
        <form  class="form col-md-12 center-block">
          <div class="form-group">
            <input type="text" id="reguserName" name="userName" class="form-control input-lg" placeholder="IT Code">
          </div>
          <div class="form-group">
            <input type="text" id="displayName" name="displayName" class="form-control input-lg" placeholder="Display Name">
          </div>
          <div class="form-group">
            <input type="text" id="itCode" name="itCode" class="form-control input-lg" placeholder="ItCode">
          </div>
          <div class="form-group">
            <input type="password" id="regpw" class="form-control input-lg" placeholder="Password">
          </div>
          <div class="form-group">
            <input type="password" id="regpws" class="form-control input-lg" placeholder="Confirm Password">
          </div>

          <div class="form-group">
            <button id="regBtn" class="btn btn-primary btn-lg btn-block">Register</button>
          </div>
        </form>
      </div>
      <div class="modal-footer">

      </div>
    </div>
  </div>
</div>



<div class="container">
    <footer class="footer">
        <p style="text-align:center;">
            Design by NEC Engineering Team, Admin: jianghu1@Lenovo.com (Oscar Jiang), DB Owner: jianghu1@Lenovo.com (Oscar Jiang)
        </p>
    </footer>
</div>

</body>